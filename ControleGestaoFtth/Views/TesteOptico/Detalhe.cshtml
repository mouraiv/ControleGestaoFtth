@model TesteOptico

<div class="d-flex flex-row justify-content-center">

    <div id="widgetbox" class="modal-content">
        <i style="cursor: pointer;" data-bs-toggle="modal" data-bs-target="#largeModal" class="fa fa-picture-o" title="IMG" id="iconWidget" aria-hidden="true"></i>
        <img style="cursor: pointer;" src="/images/29472.png" alt="DWG" id="iconDwg" href="#" width="25" height="25">
    </div>

    <div class="modal-content">
        <div class="modal-header bg-primary p-2 position-relative">
            <a style="font-size:0.9rem; font-weight: 600;" class="text-white text-decoration-none">
                -- Ficha Técnica --
            </a>
        </div>
        <div class="modal-body">
            <div id="displayDetalheFtth">
                <!-- Condição Nula do Modal -->
                @if (Model != null)
                {
                    <table id="ftthDetalhe">
                        <tr>
                            <td colspan="2">Construtora: <a>@Model.Construtora.Nome</a></td>
                        </tr>
                        <tr>
                            <td>Estação: <a>@Model.Estacao?.NomeEstacao</a></td>
                            <td>Tipo Obra: <a>@Model.TipoObra?.Nome</a></td>
                        </tr>
                        <tr data-bs-toggle="collapse" href="#collapseFtthDetalhe" role="button">
                            <td colspan="2">CDO: <a id="IndexCdo">@Model.CDO</a> - <a>@Model.Netwin?.Tipo</a><i class="fa fa-exclamation-circle"></i></td>
                        </tr>
                        <tr class="collapse" id="collapseFtthDetalhe">
                            <td colspan="2" align="center" valign="baseline"><a>-- @Model.Netwin?.Descricao --</a></td>
                        </tr>
                        <tr>
                            <td>Cabo: <a>@Model.Cabo</a></td>
                            <td>Celula: <a>@Model.Celula</a></td>
                        </tr>
                        <tr>
                            <td>Capacinade: <a>@Model.Capacidade</a></td>
                            <td>Técnico: <a>@Model.Tecnico</a></td>
                        </tr>
                        <tr>
                            <td>Total UMs: <a>@Model.TotalUms</a></td>
                            <td>Equipe Construção: <a>@Model.EquipedeConstrucao</a></td>
                        </tr>
                        <tr>
                            <td>Estado Campo: <a>@Model.EstadoCampo?.Nome</a></td>
                            <td>Data Teste: <a>@Model.DatadoTeste?.ToString("dd/MM/yyyy")</a></td>
                        </tr>
                        <tr>
                            <td>Data Construção: <a>@Model.DatadeConstrucao?.ToString("dd/MM/yyyy")</a></td>
                            <td>Data Recebimento: <a>@Model.DatadeRecebimento?.ToString("dd/MM/yyyy")</a></td>
                        </tr>
                        <tr>
                            <td colspan="2">Localização: <a>@Model.Endereco</a></td>
                        </tr>
                        <tr>
                            <td>Bobina Lançamento: <a>@Model.BobinadeLancamento</a></td>
                            <td>Posição ICX/DGO: <a>@Model.PosicaoICX_DGO</a></td>
                        </tr>
                        <tr>
                            <td>Bobina de Recepção: <a>@Model.BobinadeRecepcao</a></td>
                            <td>Splitter CEOS: <a>@Model.SplitterCEOS</a></td>
                        </tr>
                        <tr>
                            <td>Quantidade Teste: <a>@Model.QuantidadeDeTeste</a></td>
                            <td>Fibra DGO: <a>@Model.FibraDGO</a></td>
                        </tr>
                        <tr>
                            <td colspan="2">Observação: <a>@Model.Observacoes</a></td>
                        </tr>
                    </table>

                    <div class="modal-footer">
                        <a role="button" id="btnRoles" asp-controller="TesteOptico" asp-action="Index" class="btn btn-secondary">Voltar</a>
                        <a role="button" id="btnRoles" asp-controller="TesteOptico" asp-action="Editar" asp-route-id="@Model.Id" class="btn btn-primary">Editar</a>
                        <a role="button" id="btnRoles" asp-controller="TesteOptico" asp-action="Confirmacao" asp-route-id="@Model.Id" class="btn btn-danger">Excluir</a>
                    </div>
                }
                <!-- End condição -->
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
  <div class="modal fade" id="largeModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
     <div class="modal-dialog">
         <div class="modal-content">

            <!--<div class="modal-header">
               <a class="modal-title" id="exampleModalLabel">-- Visualizador --</a>
             </div>-->

             <div class="modal-body">
                 <!--Conteudo Display-->
                        <!-- carousel -->
                        <div id='carouselExampleIndicators'
                             class='carousel slide'
                             data-bs-ride='carousel'>
                            <ol class='carousel-indicators'>
                                <li data-bs-target='#carouselExampleIndicators'
                                    data-bs-slide-to='0'
                                    class='active'></li>
                                <li data-bs-target='#carouselExampleIndicators'
                                    data-bs-slide-to='1'></li>
                                <li data-bs-target='#carouselExampleIndicators'
                                    data-bs-slide-to='2'></li>
                            </ol>
                            <div class='carousel-inner'>
                               
                            </div>
                            <a class='carousel-control-prev'
                               href='#carouselExampleIndicators'
                               role='button'
                               data-bs-slide='prev'>
                                <span class='carousel-control-prev-icon'
                                      aria-hidden='true'></span>
                                <span class='sr-only'>Previous</span>
                            </a>
                            <a class='carousel-control-next'
                               href='#carouselExampleIndicators'
                               role='button'
                               data-bs-slide='next'>
                                <span class='carousel-control-next-icon'
                                      aria-hidden='true'></span>
                                <span class='sr-only'>Next</span>
                            </a>
                        </div>
                    </div>
                    <!--End Caroucel-->
                    <!-- End -->
              </div>
        </div>
    </div>
<!-- End Modal -->

@section Scripts
    {
    <script>
        //FUNÇÃO REPONSÁVEL PELAS ACÕES JS/JQUERY DA VIEW Detahle
        function TesteOpticoDetalhe() {
            var id = "@Model?.CDO";
            //BAIXAR MODELO BASE
            $('#iconWidget').on('click', function () {
                console.log(id);

                let dir = "~/../../../StaticUpload/TesteOptico/Anexos/BOT/TESTE_OPTICO/CDOE-18901/";

                /*$.get(dir,
                    {}, function (resposta) {
                         $(resposta).find("a:contains('jpg')").each(function () {
                            var filename = this.href.replace(window.location.host, "").replace("http://", "");
                            //$("body").append("<img src='" + dir + filename + "'>");
                            console.log(dir + filename);
                        });
                        return false;
                 });*/

                //CARREGAR MODEL DE DOWNLOAD MODELO BASE
                $('.carousel-inner').html(`
                     <div class='carousel-item active'>
                        <img class='img-size' src='~/../../../StaticUpload/TesteOptico/Anexos/BOT/TESTE_OPTICO/CDOE-18901/BOTCDOE-18901.jpg' alt='First slide' />
                     </div>
                     <div class='carousel-item'>
                        <img class='img-size' src='https://images.unsplash.com/photo-1491555103944-7c647fd857e6?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80' alt='Second slide' />
                     </div>
                     <div class='carousel-item'>
                        <img class='img-size' src='https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80' alt='Second slide' />
                     </div>
                `);

                //CARREGAR ATRIBUTOS MODAL
                /*$(this).find('#exampleModal').modal({
                    keyboard: true,
                    backdrop: "static",
                    show: false,

                });*/
                return false;
            });
        }(TesteOpticoDetalhe())
    </script>
    }

