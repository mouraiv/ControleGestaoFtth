@model TesteOptico

<div class="d-flex flex-row justify-content-center" id="container-detalhe">

    <div id="widgetbox" class="modal-content">
        <i style="cursor: pointer;" data-bs-toggle="modal" data-bs-target="#largeModal" class="fa fa-picture-o" title="IMG" id="iconWidget" aria-hidden="true"></i>
        <img style="cursor: pointer;" src="/images/29472.png" alt="DWG" id="iconDwg" href="#" width="25" height="25">
    </div>

    <div class="modal-content">
        <div class="modal-header bg-primary p-2 position-relative">
            <a style="font-size:0.9rem; font-weight: 600;" class="text-white text-decoration-none">
                -- Ficha Técnica --
            </a>
        </div>
        <div class="modal-body">
            <div id="displayDetalheFtth">
                <!-- Condição Nula do Modal -->
                @if (Model != null)
                {
                    <table id="ftthDetalhe">
                        <tr>
                            <td colspan="2">Construtora: <a>@Model.Construtora.Nome</a></td>
                        </tr>
                        <tr>
                            <td>Estação: <a>@Model.Estacao?.NomeEstacao</a></td>
                            <td>Tipo Obra: <a>@Model.TipoObra?.Nome</a></td>
                        </tr>
                        <tr data-bs-toggle="collapse" href="#collapseFtthDetalhe" role="button">
                            <td colspan="2">CDO: <a id="IndexCdo">@Model.CDO</a> - <a>@Model.Netwin?.Tipo</a><i class="fa fa-exclamation-circle"></i></td>
                        </tr>
                        <tr class="collapse" id="collapseFtthDetalhe">
                            <td colspan="2" align="center" valign="baseline"><a>-- @Model.Netwin?.Descricao --</a></td>
                        </tr>
                        <tr>
                            <td>Cabo: <a>@Model.Cabo</a></td>
                            <td>Celula: <a>@Model.Celula</a></td>
                        </tr>
                        <tr>
                            <td>Capacinade: <a>@Model.Capacidade</a></td>
                            <td>Técnico: <a>@Model.Tecnico</a></td>
                        </tr>
                        <tr>
                            <td>Total UMs: <a>@Model.TotalUms</a></td>
                            <td>Equipe Construção: <a>@Model.EquipedeConstrucao</a></td>
                        </tr>
                        <tr>
                            <td>Estado Campo: <a>@Model.EstadoCampo?.Nome</a></td>
                            <td>Data Teste: <a>@Model.DatadoTeste?.ToString("dd/MM/yyyy")</a></td>
                        </tr>
                        <tr>
                            <td>Data Construção: <a>@Model.DatadeConstrucao?.ToString("dd/MM/yyyy")</a></td>
                            <td>Data Recebimento: <a>@Model.DatadeRecebimento?.ToString("dd/MM/yyyy")</a></td>
                        </tr>
                        <tr>
                            <td colspan="2">Localização: <a>@Model.Endereco</a></td>
                        </tr>
                        <tr>
                            <td>Bobina Lançamento: <a>@Model.BobinadeLancamento</a></td>
                            <td>Posição ICX/DGO: <a>@Model.PosicaoICX_DGO</a></td>
                        </tr>
                        <tr>
                            <td>Bobina de Recepção: <a>@Model.BobinadeRecepcao</a></td>
                            <td>Splitter CEOS: <a>@Model.SplitterCEOS</a></td>
                        </tr>
                        <tr>
                            <td>Quantidade Teste: <a>@Model.QuantidadeDeTeste</a></td>
                            <td>Fibra DGO: <a>@Model.FibraDGO</a></td>
                        </tr>
                        <tr>
                            <td colspan="2">Observação: <a>@Model.Observacoes</a></td>
                        </tr>
                    </table>

                    <div class="modal-footer">
                        <a role="button" id="btnRoles" asp-controller="TesteOptico" asp-action="Index" class="btn btn-secondary">Voltar</a>
                        <a role="button" id="btnRoles" asp-controller="TesteOptico" asp-action="Editar" asp-route-id="@Model.Id" class="btn btn-primary">Editar</a>
                        <a role="button" id="btnRoles" asp-controller="TesteOptico" asp-action="Confirmacao" asp-route-id="@Model.Id" class="btn btn-danger">Excluir</a>
                    </div>
                }
                <!-- End condição -->
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
  <div class="modal fade" id="largeModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
     <div class="modal-dialog">
         <div class="modal-content">

             <div class="modal-body-img">
                 <!--Conteudo Display-->
                        
                    <!-- End -->
                    </div>
              </div>
        </div>
    </div>
<!-- End Modal -->

@section Scripts
    {
    <script>
        //FUNÇÃO REPONSÁVEL PELAS ACÕES JS/JQUERY DA VIEW DETAHLE
        function TesteOpticoDetalhe() {
            //VARIAVEL GLOBAL
            var sgl = "@Model?.Estacao?.Sigla";
            var cdo = "@Model?.CDO";

            //CARREGAR IMAGEM NO MODAL
            $('#iconWidget').on('click', function () {
                let dir = '@Url.Action("ImgOptico", "TesteOptico")?sgl='+sgl+'&cdo='+cdo;

                $.get(dir,
                    {}, function (resposta) {
                        $('.modal-body-img').html(resposta);
                        return false;
                 });
                return false;
            });

            //CARREGAR DWG NO MODAL
            $('#iconDwg').on('click', function () {
                let dir = '@Url.Action("DwgOptico", "TesteOptico")?sgl=' + sgl + '&cdo=' + cdo;

                location.href = dir;
               
            });
        }(TesteOpticoDetalhe())
    </script>
    }

