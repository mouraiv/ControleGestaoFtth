@model Estacoe

<div class="d-flex flex-row justify-content-center">
    <div class="d-flex flex-column">
        <!-- Alert para tratamento de exceções -->
        @if (TempData["Sucesso"] != null)
        {
            <div id="alertForm" class="alert alert-success" role="alert">
                <button type="button" class="close-alert text-success" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <a>@TempData["Sucesso"]</a>
            </div>
        }
        @if (TempData["Falha"] != null)
        {
            <div id="alertForm" class="alert alert-danger" role="alert">
                <button type="button" class="close-alert text-danger" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <a>@TempData["Falha"]</a>
            </div>
        }
        <!-- End  Alert-->
        <!-- Formulário para edição -->
        <form asp-controller="Estacao" asp-action="Editar" method="post" class="needs-validation" novalidate>
            <input type="hidden" asp-for="Id">
            <div class="bg-primary text-center text-white p-1" style="font-size:0.8rem; font-weight:600;"><a>-- EDITAR --</a></div>
            <div id="formEditar" class="row">
                <div class="form-group col">
                    <label>Responsável:</label>
                    <input type="text" asp-for="Responsavel" class="form-control" maxlength="50" required>
                    <div class="invalid-feedback">Campo Obrigatório.</div>
                </div>
                <div class="w-100"></div>
                <div class="form-group position-relative col">
                    <label>Estação:</label>
                    <input type="text" asp-for="NomeEstacao" class="form-control" maxlength="50" disabled>
                    <button data-bs-toggle="modal" data-bs-target="#exampleModal" type="button" id="btnIconExcluir" title="Excluir"><i class="fa fa-trash"></i></button>
                </div>
                <div class="form-group col">
                    <label>Sigla:</label>
                    <input type="text" asp-for="Sigla" class="form-control" maxlength="50" required>
                    <div class="invalid-feedback">Campo Obrigatório.</div>
                </div>
                <div class="modal-footer p-0 m-0 mt-4">
                    <button type="submit" class="btn btn-primary mt-4 ms-2">Editar</button>
                    <a role="button" asp-action="Index" asp-controller="Estacao" id="btnRoles" class="btn btn-secondary mt-4 me-2">Voltar</a>
                </div>
            </div>
        </form>
        <!-- End Formulário-->
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header bg-primary p-2 position-relative">
            </div>
            <div class="modal-body">

                <!--Conteudo Display-->
                <div class="d-flex justify-content-center">
                    <div class="spinner-border text-secondary m-5" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>
                <!-- End -->

            </div>
        </div>
    </div>
</div>
<!-- End Modal -->
@section Scripts
    {
    <script>
        //FUNÇÃO REPONSÁVEL PELAS ACÕES JS/JQUERY DA VIEW EDITAR CONSTRUTORA
        function EstacaoEditar() {
            //SPINNER LOADER
            const spinnerFtth = (display) => {
                $(display).html(`
                                        <div class= "d-flex justify-content-center">
                                            <div class="spinner-border text-secondary m-5" role="status">
                                                <span class="sr-only">Loading...</span>
                                            </div>
                                        </div>
                                    `   )
            }

            //AÇÃO BUTTON ICON EXCLUIR SHOW ME MODAL
            $('#formEditar').on('click', '#btnIconExcluir', function () {
                //CARREGAR DETAHLE VIEW E CHAMAR O COLLAPSE MODAL
                $.get('../../Estacao/Confirmacao?id=' + @Model.Id,
                    {}, function (resposta) {
                        //CARREGAR SPINNER LOADER
                        spinnerFtth('modal-body');

                        //EDITAR MODAL HEADER
                        $('.modal-header').html(`
                                      <i style="font-size:1.5rem;" class="fa fa-exclamation-circle position-absolute start-0 ms-2 text-white aria-hidden="true""></i>
                                <a style="font-size:0.9rem; font-weight: 600;" class="text-white text-decoration-none">
                                 -- Atenção --
                                </a>
                                `);

                        //CARREGAR PARTIAL VIEW
                        $('.modal-body').html($(resposta).find('.modal-body').html());

                        //EDITAR MODAL FOOTER
                        $('.modal-body .modal-footer').html(`
                                    <button onclick="location.href='@Url.Action("Apagar", "Estacao", new {id = Model.Id})'" class="btn btn-primary mt-2">Confirmar</button>
                                    <button data-bs-dismiss="modal" class= "btn btn-secondary mt-2">Cancelar</button>
                                `);

                        return false;
                    });

                //CARREGAR ATRIBUTOS MODAL
                $(this).find('#exampleModal').modal({
                    keyboard: true,
                    backdrop: "static",
                    show: false,

                });
            });

        } (EstacaoEditar());
    </script>
}